# SnapQuote v2.0
## Trade-Focused AI Estimator (ì „ë¬¸ ê¸°ìˆ ììš© AI ê²¬ì  ìƒì„±ê¸°)

---

## 1. ì œ1ì›ë¦¬ ì •ì˜ (The Core Physics)

**ëª©í‘œ**: í˜„ì¥ ê¸°ìˆ ìê°€ 'ì‚¬ì§„ 1ì¥'ê³¼ 'ìŒì„± ë©”ëª¨'ë§Œìœ¼ë¡œ 30ì´ˆ ì•ˆì— "ëˆì„ ë°›ì„ ìˆ˜ ìˆëŠ”(Payable)" ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ PDF ê²¬ì ì„œë¥¼ ìƒì„±í•œë‹¤.

**í•µì‹¬ ê°€ì¹˜**: 
- ì†ë„(Speed): í˜„ì¥ì—ì„œ ì¦‰ì‹œ ìƒì„±
- ì „ë¬¸ì„±(Professionalism): AIê°€ ì˜ì–´ ë¹„ì¦ˆë‹ˆìŠ¤ í‘œí˜„ìœ¼ë¡œ ìë™ ë³€í™˜
- ì–¸ì–´ ì¥ë²½ ì œê±°: ì˜ì–´ê°€ ì„œíˆ° ê¸°ìˆ ìë„ ë„¤ì´í‹°ë¸Œê¸‰ ê²¬ì ì„œ ì‘ì„±

**íƒ€ê²Ÿ ê³ ê°**:
- 1ì°¨: ìºë‚˜ë‹¤/ë¯¸êµ­ í•œì¸ ê¸°ìˆ ì (ë°°ê´€ê³µ, ì „ê¸°ê³µ, ìˆ˜ë¦¬ê¸°ì‚¬)
- 2ì°¨: ëª¨ë“  ë¹„ì˜ì–´ê¶Œ ê¸°ìˆ ì (ë¼í‹´ê³„, ì¤‘êµ­ê³„ ë“±)
- ì‹œì¥ ê·œëª¨(TAM): ë¶ë¯¸ ì†Œê·œëª¨ ê±´ì„¤/ìˆ˜ë¦¬ì—… ì¢…ì‚¬ì ì•½ 500ë§Œ ëª… ì¤‘ ë¹„ì˜ì–´ê¶Œ ì•½ 20% = 100ë§Œ ëª…

**íƒ€ê²Ÿ ë””ë°”ì´ìŠ¤**: Mobile First (iOS/Android PWA)

---

## 2. ì‚¬ìš©ì íë¦„ (The Happy Path)

### Step 1: Input (ì…ë ¥)
1. ì•± ì‹¤í–‰ â†’ [+ ìƒˆ ê²¬ì ] ë²„íŠ¼
2. **ì‚¬ì§„ ì´¬ì˜** (ì„ íƒì‚¬í•­ - ê³ ê°ì—ê²Œ ë³´ì—¬ì£¼ê¸°ìš©)
3. **ìŒì„± ë…¹ìŒ ë˜ëŠ” í…ìŠ¤íŠ¸ ì…ë ¥**
   - ì˜ˆ: "Replace kitchen sink P-trap, 1 hour labor, $50 parts"
   - ì˜ˆ: "í™”ì¥ì‹¤ ë³€ê¸° ìˆ˜ë¦¬, ë¶€í’ˆë¹„ 5ë§Œì›, ê³µì„ 10ë§Œì›"

### Step 2: Process (AI ì²˜ë¦¬)
1. ìŒì„± â†’ í…ìŠ¤íŠ¸ ë³€í™˜ (Whisper API)
2. GPT-4oê°€ **ì „ë¬¸ ì˜ì–´ í‘œí˜„**ìœ¼ë¡œ í•­ëª© ìƒì„±
   - âŒ "fix toilet" 
   - âœ… "Toilet Flapper Valve Replacement & Seal Inspection"
3. **ê°€ê²© ë¡œì§**:
   - ì‚¬ìš©ìê°€ ë§í•œ ê°€ê²© ìš°ì„  ì‚¬ìš©
   - ê°€ê²© ì—†ìœ¼ë©´ $0ìœ¼ë¡œ ë‘ê³  ìˆ˜ë™ ì…ë ¥ ìœ ë„
   - (V2 ê¸°ëŠ¥) AIê°€ ì§€ì—­ í‰ê· ê°€ ì¶”ì²œ
4. ë²•ì  ê³ ì§€ë¬¸ ìë™ ì¶”ê°€

### Step 3: Output (ì¶œë ¥)
1. **í¸ì§‘ ê°€ëŠ¥í•œ ë¯¸ë¦¬ë³´ê¸°**
   - ê° í•­ëª©ì˜ ì„¤ëª…/ìˆ˜ëŸ‰/ê°€ê²© ìˆ˜ì • ê°€ëŠ¥
   - ì„¸ê¸ˆ(Tax) ìë™ ê³„ì‚°
2. [PDF ìƒì„±] í´ë¦­
3. ì´ë©”ì¼/ë¬¸ì ê³µìœ  ë˜ëŠ” ë‹¤ìš´ë¡œë“œ

---

## 3. ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ (The Money)

### ìˆ˜ìµí™” ì „ëµ (3ë‹¨ê³„)
| ë‹¨ê³„ | ê¸°ê°„ | ì •ì±… | ëª©í‘œ |
|------|------|------|------|
| **Phase 1: Free** | ì¶œì‹œ í›„ 3ê°œì›” | ê²¬ì ì„œ ë¬´ì œí•œ ë¬´ë£Œ | PMF ê²€ì¦, 100ëª… ìœ ì € í™•ë³´ |
| **Phase 2: Freemium** | 3~6ê°œì›” | ì›” 5ê°œ ë¬´ë£Œ / ì´í›„ $0.99/ê°œ | ì „í™˜ìœ¨ í…ŒìŠ¤íŠ¸ |
| **Phase 3: Subscription** | 6ê°œì›”~ | $19/ì›” (ë¬´ì œí•œ) ë˜ëŠ” $2/ê°œ | ì•ˆì •ì  ìˆ˜ìµ |

### ì¶”ê°€ ìˆ˜ìµ ê°€ëŠ¥ì„± (ë‚˜ì¤‘ì—)
- Premium: ë¡œê³  ì»¤ìŠ¤í„°ë§ˆì´ì§•, ë¸Œëœë“œ ìƒ‰ìƒ ($29/ì›”)
- Enterprise: íŒ€ ê³„ì •, ê³ ê° DB í†µí•© ($99/ì›”)
- Referral: ìì¬ ê³µê¸‰ì—…ì²´ ì œíœ´ ìˆ˜ìˆ˜ë£Œ

---

## 4. ê¸°ìˆ  ìŠ¤íƒ & ì•„í‚¤í…ì²˜ (The Stack)

**ì›ì¹™**: 1ì¸ ê°œë°œ, ì„œë²„ ê´€ë¦¬ ì œë¡œ, í™•ì¥ ê°€ëŠ¥

| Layer | Technology | ì´ìœ  |
|-------|-----------|------|
| **Frontend** | Next.js 14 (App Router) + Tailwind + Shadcn/UI | SEO, SSR, ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© |
| **Backend** | Supabase (Auth, Postgres, Storage) | ë°±ì—”ë“œ ì½”ë“œ ì—†ì´ DB+Auth í•´ê²° |
| **AI** | OpenAI GPT-4o + Whisper | Vision(ì„ íƒ) + Text + Audio ì˜¬ì¸ì› |
| **Payment** | Stripe | ê¸€ë¡œë²Œ ê²°ì œ, êµ¬ë… ê´€ë¦¬ |
| **Deploy** | Vercel | ë¬´ë£Œ í‹°ì–´, ìë™ ë°°í¬ |
| **PDF** | react-pdf ë˜ëŠ” jsPDF | í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìƒì„± |

---

## 5. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (The Skeleton)

```sql
-- Users (ê¸°ìˆ ì ì •ë³´)
CREATE TABLE profiles (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email TEXT UNIQUE NOT NULL,
  business_name TEXT,
  logo_url TEXT,
  phone TEXT,
  address TEXT,
  tax_rate FLOAT DEFAULT 0.13, -- ìºë‚˜ë‹¤ HST ê¸°ë³¸ê°’
  license_number TEXT, -- ì£¼ë³„ ë¼ì´ì„¼ìŠ¤ ë²ˆí˜¸
  created_at TIMESTAMP DEFAULT NOW()
);

-- Clients (ê³ ê° ì •ë³´)
CREATE TABLE clients (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  address TEXT,
  email TEXT,
  phone TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Estimates (ê²¬ì ì„œ)
CREATE TABLE estimates (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  client_id UUID REFERENCES clients(id),
  status TEXT DEFAULT 'draft', -- 'draft' | 'sent' | 'paid'
  total_amount FLOAT,
  currency TEXT DEFAULT 'CAD', -- 'CAD' | 'USD'
  ai_summary TEXT, -- AIê°€ ìƒì„±í•œ ì‘ì—… ìš”ì•½
  photo_url TEXT, -- í˜„ì¥ ì‚¬ì§„ URL
  pdf_url TEXT, -- ìƒì„±ëœ PDF íŒŒì¼ URL
  created_at TIMESTAMP DEFAULT NOW(),
  sent_at TIMESTAMP
);

-- Estimate Items (ê²¬ì  ì„¸ë¶€ í•­ëª©)
CREATE TABLE estimate_items (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  estimate_id UUID REFERENCES estimates(id) ON DELETE CASCADE,
  description TEXT NOT NULL, -- ì˜ˆ: "Installation of heavy-duty brass P-trap"
  quantity INT DEFAULT 1,
  unit_price FLOAT,
  total FLOAT, -- quantity * unit_price
  sort_order INT DEFAULT 0
);
```

---

## 6. AI ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (The Brain)

```javascript
const SYSTEM_PROMPT = `
You are an expert Construction & Trade Estimator. Convert rough field notes into professional English estimates.

RULES:
1. Professionalize Language:
   - "fix toilet" â†’ "Toilet Flapper Valve Replacement & Seal Inspection"
   - "change pipe" â†’ "PVC Pipe Replacement (3/4 inch, Schedule 40)"

2. Pricing Logic:
   - IF user mentions price: Use that exact amount
   - IF no price given: Set unit_price to 0 (user will fill manually)
   - NEVER invent prices

3. Add Value Items:
   - Always include "Post-Service Safety Inspection" with $0 price (shows professionalism)

4. Output Format (JSON):
{
  "items": [
    {
      "description": "Professional description",
      "quantity": 1,
      "unit_price": 50.00
    }
  ],
  "summary_note": "Brief summary of work scope"
}

5. Tone: Professional, trustworthy, concise.
`;
```

---

## 7. ê°œë°œ ë¡œë“œë§µ (Step-by-Step for AI IDE)

### Week 1: MVP Core (MVP í•µì‹¬ ê¸°ëŠ¥)
**Step 1: í”„ë¡œì íŠ¸ ì„¸íŒ…**
```
Prompt: "Create a mobile-first Next.js 14 application using App Router, 
Tailwind CSS, and Shadcn UI. Set up Supabase client with environment 
variables. Create a bottom navigation with 'Home', 'New', 'History' tabs."
```

**Step 2: New Estimate í˜ì´ì§€**
```
Prompt: "Create /new page with:
1. Optional image upload (camera/gallery)
2. Text area for notes (placeholder: 'Describe the job and pricing')
3. 'Generate' button that calls OpenAI API with the system prompt
4. Display returned JSON as editable list (Description, Qty, Price columns)
5. 'Save' button to store in Supabase estimates table"
```

**Step 3: PDF ìƒì„±**
```
Prompt: "Add 'Generate PDF' button. Use jsPDF to create professional invoice:
- Header: User's business name, address, phone
- Client section
- Line items table (Description | Qty | Unit Price | Total)
- Subtotal, Tax (13%), Grand Total
- Footer: 'This is an estimate. Final price subject to change.'
- Download as 'Estimate_[ClientName]_[Date].pdf'"
```

### Week 2: Polish (ë‹¤ë“¬ê¸°)
**Step 4: History í˜ì´ì§€**
```
Prompt: "Create /history page showing all estimates in card format.
Each card shows: Client name, Date, Total amount, Status badge.
Clicking card opens detail view with 'Download PDF' and 'Mark as Sent' buttons."
```

**Step 5: ì¸ì¦ & í”„ë¡œí•„**
```
Prompt: "Add Supabase Auth (Google Sign-in).
Create /profile page where user can edit: Business name, Logo upload, 
Tax rate, License number. Save to profiles table."
```

---

## 8. ë²•ì  ë³´í˜¸ì¥ì¹˜ (Legal Safeguards)

### PDF í•˜ë‹¨ í•„ìˆ˜ ë¬¸êµ¬ (í•˜ë“œì½”ë”©)
```
IMPORTANT NOTICE:
This is an estimate only, not a binding contract. Final costs may vary 
based on unforeseen conditions. Work requires written approval. 
License #: [USER_LICENSE_NUMBER]

Valid for 30 days from issue date.
```

### ì£¼ë³„ ê·œì • ëŒ€ì‘ (V2 ê¸°ëŠ¥)
- ì‚¬ìš©ìê°€ ì£¼(State/Province) ì„ íƒ ì‹œ í•´ë‹¹ ê·œì • ë¬¸êµ¬ ìë™ ì‚½ì…
- ì˜ˆ: ìºë‚˜ë‹¤ ì˜¨íƒ€ë¦¬ì˜¤ â†’ "HST Registration #: [TBD]"

---

## 9. ìµœì†Œ ì‹¤í–‰ ê°€ëŠ¥í•œ ëŒíŒŒêµ¬ (MVB) ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì´ê²ƒë§Œ ë˜ë©´ ì¦‰ì‹œ ë°°í¬:**

- [ ] ëª¨ë°”ì¼ì—ì„œ ì‚¬ì§„ ì—…ë¡œë“œ ê°€ëŠ¥
- [ ] "í™”ì¥ì‹¤ ë³€ê¸° ìˆ˜ë¦¬ 10ë§Œì›"ì´ë¼ê³  ì…ë ¥ â†’ ì˜ë¬¸ ê²¬ì ì„œ í•­ëª© ìƒì„±ë¨
- [ ] ê°€ê²© ìˆ˜ì • ê°€ëŠ¥
- [ ] PDF ë‹¤ìš´ë¡œë“œ ë˜ëŠ” ê³µìœ  ê°€ëŠ¥
- [ ] ê²¬ì ì„œê°€ Supabaseì— ì €ì¥ë¨

**ë°°í¬ í›„ ì²« ì£¼ ëª©í‘œ:**
- ì‹¤ì œ ê¸°ìˆ ì 5ëª…ì—ê²Œ í…ŒìŠ¤íŠ¸
- "ì´ê±° ëˆ ë‚´ê³  ì“¸ë˜ìš”?" ì§ˆë¬¸
- 3ëª… ì´ìƒ "Yes" â†’ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰

---

## 10. ë¦¬ìŠ¤í¬ & ëŒ€ì‘ ì „ëµ

| ë¦¬ìŠ¤í¬ | í™•ë¥  | ëŒ€ì‘ì±… |
|--------|------|--------|
| AIê°€ ê°€ê²© ì˜ëª» ì¶”ì • | ë†’ìŒ | ì‚¬ìš©ì ê°€ê²© ìš°ì„ , AIëŠ” ë³´ì¡°ë§Œ |
| ì‚¬ì§„ ë¶„ì„ ì •í™•ë„ ë‚®ìŒ | ì¤‘ê°„ | V1ì—ì„œëŠ” ì‚¬ì§„ = ì²¨ë¶€ìš©ë§Œ |
| íƒ€ê²Ÿ ì‹œì¥ ë„ˆë¬´ ì‘ìŒ | ì¤‘ê°„ | ì´ˆê¸°ì—” í•œì¸ ì§‘ì¤‘, PMF í›„ í™•ì¥ |
| ë²•ì  ë¬¸ì œ | ë‚®ìŒ | ë””ìŠ¤í´ë ˆì´ë¨¸ ëª…í™•íˆ, ë³€í˜¸ì‚¬ ê²€í†  |

---

## 11. ì„±ê³µ ì§€í‘œ (Success Metrics)

### Phase 1 (3ê°œì›”)
- ê°€ì…ì 100ëª…
- ìƒì„±ëœ ê²¬ì ì„œ 500ê°œ
- ì£¼ê°„ í™œì„± ì‚¬ìš©ì(WAU) 30ëª… ì´ìƒ

### Phase 2 (6ê°œì›”)
- ìœ ë£Œ ì „í™˜ìœ¨ 5% ì´ìƒ
- MRR $500 ë‹¬ì„±
- ê³ ê° ì¬ë°©ë¬¸ìœ¨ 40% ì´ìƒ

---

## 12. ì¦‰ì‹œ ì‹¤í–‰ ì‚¬í•­

**ì˜¤ëŠ˜ í•  ì¼:**
1. âœ… Cursor/Windsurf ì—´ê¸°
2. âœ… Step 1 í”„ë¡¬í”„íŠ¸ ì…ë ¥
3. âœ… OpenAI API í‚¤ ë°œê¸‰ ($20 í¬ë ˆë”§ìœ¼ë¡œ ì‹œì‘)
4. âœ… Supabase í”„ë¡œì íŠ¸ ìƒì„±

**ì´ë²ˆ ì£¼ë§ê¹Œì§€:**
- Step 1~3 ì™„ì„±
- ë³¸ì¸ í•¸ë“œí°ì—ì„œ í…ŒìŠ¤íŠ¸
- ì£¼ë³€ ê¸°ìˆ ì 1ëª…ì—ê²Œ ì‹œì—°

**ë³µì¡í•œ ìƒê°ì€ ë²„ë¦¬ê³ , ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”. ì½”ë“œê°€ ë‹µì…ë‹ˆë‹¤.** ğŸš€

---

*ë²„ì „ ê´€ë¦¬: v2.0 (2024-12-05) - ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸, ë²•ì  ëŒ€ì‘, ë¦¬ìŠ¤í¬ ë¶„ì„ ì¶”ê°€*